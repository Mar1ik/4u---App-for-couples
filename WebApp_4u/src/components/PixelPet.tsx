interface PixelPetProps {
  color: string;
  secondaryColor: string;
  mood: 'happy' | 'neutral' | 'sad' | 'sleeping' | 'excited';
  size?: number;
  petType?: 'dino' | 'star' | 'bunny' | 'cat';
}

export function PixelPet({ color, secondaryColor, mood, size = 100, petType = 'dino' }: PixelPetProps) {
  const getBodyPixels = () => {
    switch (petType) {
      case 'dino':
        return [
          [0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],
          [0,0,0,0,0,1,2,2,2,2,1,0,0,0,0,0],
          [0,0,0,0,1,2,2,2,2,2,2,1,0,0,0,0],
          [0,0,0,1,2,2,5,5,2,2,5,5,1,0,0,0],
          [0,0,1,2,2,2,5,5,2,2,5,5,2,1,0,0],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
          [1,2,2,2,4,4,4,4,4,4,4,2,2,2,2,1],
          [1,2,2,2,2,4,4,4,4,4,2,2,2,2,2,1],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [0,0,1,1,2,2,2,2,2,2,2,2,1,1,0,0],
          [0,0,1,2,1,2,2,2,2,2,2,1,2,1,0,0],
          [0,1,2,2,1,0,2,2,2,2,0,1,2,2,1,0],
          [0,1,2,2,1,0,0,0,0,0,0,1,2,2,1,0],
          [0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        ];
      case 'star':
        return [
          [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
          [0,0,0,0,0,0,1,2,2,1,0,0,0,0,0,0],
          [0,0,0,0,0,1,2,2,2,2,1,0,0,0,0,0],
          [0,0,0,0,1,2,2,5,5,2,2,1,0,0,0,0],
          [0,0,1,1,2,2,2,5,5,2,2,2,1,1,0,0],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [1,2,2,2,2,4,4,4,4,4,4,2,2,2,2,1],
          [1,2,2,2,2,2,4,4,4,4,2,2,2,2,2,1],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
          [0,1,2,2,1,2,2,2,2,2,2,1,2,2,1,0],
          [0,1,2,1,0,1,2,2,2,2,1,0,1,2,1,0],
          [0,1,1,0,0,0,1,2,2,1,0,0,0,1,1,0],
          [0,0,0,0,0,0,1,2,2,1,0,0,0,0,0,0],
          [0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],
          [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        ];
      case 'bunny':
        return [
          [0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],
          [0,1,2,2,1,0,0,0,0,0,0,1,2,2,1,0],
          [0,1,2,2,1,0,0,0,0,0,0,1,2,2,1,0],
          [0,1,2,2,1,0,1,1,1,1,0,1,2,2,1,0],
          [0,0,1,1,0,1,2,2,2,2,1,0,1,1,0,0],
          [0,0,0,0,1,2,2,2,2,2,2,1,0,0,0,0],
          [0,0,0,1,2,2,5,5,2,5,5,2,1,0,0,0],
          [0,0,1,2,2,2,5,5,2,5,5,2,2,1,0,0],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [0,1,2,2,2,4,4,4,4,4,4,2,2,2,1,0],
          [0,1,2,2,2,2,4,4,4,4,2,2,2,2,1,0],
          [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
          [0,0,0,1,1,2,2,2,2,2,2,1,1,0,0,0],
          [0,0,1,2,2,1,2,2,2,2,1,2,2,1,0,0],
          [0,0,1,2,2,1,0,0,0,0,1,2,2,1,0,0],
          [0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0],
        ];
      case 'cat':
        return [
          [0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],
          [0,1,2,2,1,0,0,0,0,0,0,1,2,2,1,0],
          [0,1,2,3,2,1,1,1,1,1,1,2,3,2,1,0],
          [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
          [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
          [0,0,1,2,2,5,5,2,2,5,5,2,2,1,0,0],
          [0,0,1,2,2,5,5,2,2,5,5,2,2,1,0,0],
          [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
          [0,0,1,2,2,2,4,4,4,4,2,2,2,1,0,0],
          [0,0,1,2,2,2,2,4,4,2,2,2,2,1,0,0],
          [0,0,0,1,2,2,2,2,2,2,2,2,1,0,0,0],
          [0,0,0,1,2,2,2,2,2,2,2,2,1,0,0,0],
          [0,0,1,2,2,1,2,2,2,2,1,2,2,1,0,0],
          [0,1,2,2,1,0,2,2,2,2,0,1,2,2,1,0],
          [0,1,2,2,1,0,0,0,0,0,0,1,2,2,1,0],
          [0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],
        ];
      default:
        return [];
    }
  };

  const bodyPixels = getBodyPixels();

  const getColor = (value: number) => {
    switch (value) {
      case 1: return '#000000'; // Outline
      case 2: return color; // Primary color
      case 3: return secondaryColor; // Secondary color (ears/spikes)
      case 4: return '#000000'; // Mouth (black for contrast)
      case 5: return '#FFFFFF'; // Eyes white
      default: return 'transparent';
    }
  };

  return (
    <div style={{ width: size, height: size }}>
      <svg 
        width={size} 
        height={size} 
        viewBox="0 0 16 16"
      >
        <style>
          {`
            @keyframes chew {
              0%, 100% {
                opacity: 1;
              }
              50% {
                opacity: 0.7;
              }
            }
            .mouth-animate {
              animation: chew 1.5s ease-in-out infinite;
            }
          `}
        </style>
        {/* Body */}
        {bodyPixels.map((row, y) =>
          row.map((cell, x) => {
            if (cell === 0 || cell === 4) return null;
            return (
              <rect
                key={`body-${y}-${x}`}
                x={x}
                y={y}
                width={1}
                height={1}
                fill={getColor(cell)}
              />
            );
          })
        )}
        {/* Animated mouth */}
        <g className="mouth-animate">
          {bodyPixels.map((row, y) =>
            row.map((cell, x) => {
              if (cell !== 4) return null;
              return (
                <rect
                  key={`mouth-${y}-${x}`}
                  x={x}
                  y={y}
                  width={1}
                  height={1}
                  fill={getColor(cell)}
                />
              );
            })
          )}
        </g>
        {/* Eye pupils */}
        {mood !== 'sleeping' && bodyPixels.map((row, y) =>
          row.map((cell, x) => {
            if (cell !== 5) return null;
            return (
              <rect
                key={`pupil-${y}-${x}`}
                x={x + 0.25}
                y={y + 0.25}
                width={0.5}
                height={0.5}
                fill="#000000"
              />
            );
          })
        )}
      </svg>
    </div>
  );
}
